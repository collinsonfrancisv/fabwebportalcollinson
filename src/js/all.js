"use strict";

document.addEventListener("DOMContentLoaded", function (e) {
  document.documentElement.classList.remove("no-js");
  document.documentElement.classList.add("js");
  svg4everybody();

  var rem = function rem() {
    var html = document.getElementsByTagName('html')[0];
    return function () {
      return parseInt(window.getComputedStyle(html)['fontSize']);
    };
  }();

  var $overlay = $('#loyalty-overlay');

  var toggleOverlay = function toggleOverlay() {
    $overlay.fadeToggle();
  };

  $('.p-rewards-points__drop-down, #loyalty-overlay').click(function () {
    $(this).toggleClass('overlay-active');

    var loyaltyMenuToggle = function loyaltyMenuToggle() {
      $('.p-loyalty-nav-mobile').slideToggle({
        duration: 400,
        easing: "swing",
        specialEasing: {
          top: 'swing',
          left: 'linear'
        },
        complete: function complete() {},
        start: function start(a) {
          toggleOverlay();
        },
        done: function done(a) {},
        fail: function fail(error) {},
        always: function always(a) {}
      });
    }();
  }); // iOS switch button toggle

  $(".c-toggle__checkbox").click(function () {
    var $toggleParent = $(this).parent();

    if ($(this).is(":checked")) {
      $toggleParent.removeClass("is-not-toggled");
      $toggleParent.addClass("is-toggled");

      if ($toggleParent.hasClass("is-toggled")) {
        $toggleParent.find(".c-toggle__icon").css("fill", "#92E842");
      }
    } else if ($(this).is(":not(:checked)")) {
      $toggleParent.removeClass("is-toggled");
      $toggleParent.addClass("is-not-toggled");

      if ($toggleParent.hasClass("is-not-toggled")) {
        $toggleParent.find(".c-toggle__icon").css("fill", "#9FA9B8");
      }
    }
  });
  $(".o-btn-prev").click(function () {
    var closestXGrid = $(this).parent().next(".horizontal-scroll");
    var gridItemWidth = $(this).parent().next(".horizontal-scroll").children(".l-card-grid__item").outerWidth(true);
    var leftPos = closestXGrid.scrollLeft();
    closestXGrid.animate({
      scrollLeft: leftPos - gridItemWidth
    }, 100);
  });
  $(".o-btn-next").click(function () {
    var closestXGrid = $(this).parent().next(".horizontal-scroll");
    var gridItemWidth = $(this).parent().next(".horizontal-scroll").children(".l-card-grid__item").outerWidth(true);
    var leftPos = closestXGrid.scrollLeft();
    closestXGrid.animate({
      scrollLeft: leftPos + gridItemWidth
    }, 100);
  });
  $(".l-section-module--2col__btn-prev").click(function () {
    var closestXGrid = $(this).parent().parent().next(".l-section-module--2col__content").children(".horizontal-scroll");
    var gridItemWidth = $(this).parent().parent().next(".l-section-module--2col__content").children(".horizontal-scroll").children(".l-section-module--2col__grid-item").outerWidth(true);
    var leftPos = closestXGrid.scrollLeft();
    closestXGrid.animate({
      scrollLeft: leftPos - gridItemWidth
    }, 100);
  });
  $(".l-section-module--2col__btn-next").click(function () {
    var closestXGrid = $(this).parent().parent().next(".l-section-module--2col__content").children(".horizontal-scroll");
    var gridItemWidth = $(this).parent().parent().next(".l-section-module--2col__content").children(".horizontal-scroll").children(".l-section-module--2col__grid-item").outerWidth(true);
    var leftPos = closestXGrid.scrollLeft();
    closestXGrid.animate({
      scrollLeft: leftPos + gridItemWidth
    }, 100);
  }); // $(".l-section-module--2col__btn-prev").click(function () {
  //   var closestXGrid2 = $(".l-section-module--2col__horizontal-scroll");
  //   var gridItemWidth2 = $(".l-section-module--2col__horizontal-scroll").children(".l-section-module--2col__grid-item").outerWidth(true);
  //   var leftPos2 = closestXGrid2.scrollLeft();
  //   closestXGrid2.animate({
  //     scrollLeft: leftPos2 - gridItemWidth2
  //   }, 100);
  // });
  // $(".l-section-module--2col__btn-next").click(function () {
  //   var closestXGrid2 = $(".l-section-module--2col__horizontal-scroll");
  //   var gridItemWidth2 = $(".l-section-module--2col__horizontal-scroll").children(".l-section-module--2col__grid-item").outerWidth(true);
  //   var leftPos2 = closestXGrid2.scrollLeft();
  //   closestXGrid2.animate({
  //     scrollLeft: leftPos2 + gridItemWidth2
  //   }, 100);
  // });

  var mqHandswide = window.matchMedia("(min-width: 43.1875rem)"); // Terms Pop Up

  $('#terms-and-condition').popup({
    escape: false,
    absolute: true,
    background: true,
    transition: 'all 0.3s',
    pagecontainer: '.p-main-content',
    scrolllock: true,
    color: 'rgba(12, 35, 64, 0.75)'
  });
  removeTermsPopup();
  mqHandswide.addListener(removeTermsPopup);

  function removeTermsPopup() {
    if (mqHandswide.matches) {
      $('#terms-and-condition').popup('hide');
      $('.c-terms--wide').html($('.c-terms').html());
    } else {
      $('.c-terms--wide').empty();
    }
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRvY3VtZW50RWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInN2ZzRldmVyeWJvZHkiLCJyZW0iLCJodG1sIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJzZUludCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCIkb3ZlcmxheSIsIiQiLCJ0b2dnbGVPdmVybGF5IiwiZmFkZVRvZ2dsZSIsImNsaWNrIiwidG9nZ2xlQ2xhc3MiLCJsb3lhbHR5TWVudVRvZ2dsZSIsInNsaWRlVG9nZ2xlIiwiZHVyYXRpb24iLCJlYXNpbmciLCJzcGVjaWFsRWFzaW5nIiwidG9wIiwibGVmdCIsImNvbXBsZXRlIiwic3RhcnQiLCJhIiwiZG9uZSIsImZhaWwiLCJlcnJvciIsImFsd2F5cyIsIiR0b2dnbGVQYXJlbnQiLCJwYXJlbnQiLCJpcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJoYXNDbGFzcyIsImZpbmQiLCJjc3MiLCJjbG9zZXN0WEdyaWQiLCJuZXh0IiwiZ3JpZEl0ZW1XaWR0aCIsImNoaWxkcmVuIiwib3V0ZXJXaWR0aCIsImxlZnRQb3MiLCJzY3JvbGxMZWZ0IiwiYW5pbWF0ZSIsIm1xSGFuZHN3aWRlIiwibWF0Y2hNZWRpYSIsInBvcHVwIiwiZXNjYXBlIiwiYWJzb2x1dGUiLCJiYWNrZ3JvdW5kIiwidHJhbnNpdGlvbiIsInBhZ2Vjb250YWluZXIiLCJzY3JvbGxsb2NrIiwiY29sb3IiLCJyZW1vdmVUZXJtc1BvcHVwIiwiYWRkTGlzdGVuZXIiLCJtYXRjaGVzIiwiZW1wdHkiXSwibWFwcGluZ3MiOiI7O0FBRUFBLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFVBQVNDLENBQVQsRUFBWTtBQUV4REYsRUFBQUEsUUFBUSxDQUFDRyxlQUFULENBQXlCQyxTQUF6QixDQUFtQ0MsTUFBbkMsQ0FBMEMsT0FBMUM7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ZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKGUpIHtcblxuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm5vLWpzXCIpO1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImpzXCIpO1xuXG4gIHN2ZzRldmVyeWJvZHkoKTtcbiAgXG4gIFxuXG4gIHZhciByZW0gPSBmdW5jdGlvbiByZW0oKSAge1xuICAgIHZhciBodG1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXTtcbiAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGh0bWwpWydmb250U2l6ZSddKTtcbiAgICB9XG4gIH0oKTsgICAgXG4gIFxuXG4gIHZhciAkb3ZlcmxheSA9ICQoJyNsb3lhbHR5LW92ZXJsYXknKTtcbiAgdmFyIHRvZ2dsZU92ZXJsYXkgPSBmdW5jdGlvbiB0b2dnbGVPdmVybGF5KCkgeyAgICBcbiAgICAkb3ZlcmxheS5mYWRlVG9nZ2xlKCk7IFxuICB9XG5cbiAgJCgnLnAtcmV3YXJkcy1wb2ludHNfX2Ryb3AtZG93biwgI2xveWFsdHktb3ZlcmxheScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnb3ZlcmxheS1hY3RpdmUnKTtcblxuICAgIFxuICAgIHZhciBsb3lhbHR5TWVudVRvZ2dsZSA9IGZ1bmN0aW9uIGxveWFsdHlNZW51VG9nZ2xlKCkgIHtcbiAgICAgICQoJy5wLWxveWFsdHktbmF2LW1vYmlsZScpLnNsaWRlVG9nZ2xlKHtcbiAgICAgICAgZHVyYXRpb246NDAwXG4gICAgICAgICxlYXNpbmc6XCJzd2luZ1wiXG4gICAgICAgICxzcGVjaWFsRWFzaW5nOnt0b3A6J3N3aW5nJyxsZWZ0OidsaW5lYXInfVxuICAgICAgICAsY29tcGxldGU6ZnVuY3Rpb24oKXsgfVxuICAgICAgICAsc3RhcnQ6ZnVuY3Rpb24oYSl7ICAgICAgICAgICBcbiAgICAgICAgICB0b2dnbGVPdmVybGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgLGRvbmU6ZnVuY3Rpb24oYSl7ICB9XG4gICAgICAgICxmYWlsOmZ1bmN0aW9uKGVycm9yKXsgIH1cbiAgICAgICAgLGFsd2F5czpmdW5jdGlvbihhKXt9XG4gICAgICAgfSk7XG4gICAgfSgpO1xuICAgIFxuICB9KTtcblxuXG5cbiAgLy8gaU9TIHN3aXRjaCBidXR0b24gdG9nZ2xlXG4gICQoXCIuYy10b2dnbGVfX2NoZWNrYm94XCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgdmFyICR0b2dnbGVQYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgpO1xuXG4gICAgaWYoJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKXtcbiAgICAgICR0b2dnbGVQYXJlbnQucmVtb3ZlQ2xhc3MoXCJpcy1ub3QtdG9nZ2xlZFwiKTtcbiAgICAgICR0b2dnbGVQYXJlbnQuYWRkQ2xhc3MoXCJpcy10b2dnbGVkXCIpO1xuXG4gICAgICBpZiAoJHRvZ2dsZVBhcmVudC5oYXNDbGFzcyhcImlzLXRvZ2dsZWRcIikpIHtcbiAgICAgICAgJHRvZ2dsZVBhcmVudC5maW5kKFwiLmMtdG9nZ2xlX19pY29uXCIpLmNzcyhcImZpbGxcIiwgXCIjOTJFODQyXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBlbHNlIGlmKCQodGhpcykuaXMoXCI6bm90KDpjaGVja2VkKVwiKSl7XG4gICAgICAkdG9nZ2xlUGFyZW50LnJlbW92ZUNsYXNzKFwiaXMtdG9nZ2xlZFwiKTtcbiAgICAgICR0b2dnbGVQYXJlbnQuYWRkQ2xhc3MoXCJpcy1ub3QtdG9nZ2xlZFwiKTtcblxuICAgICAgaWYgKCR0b2dnbGVQYXJlbnQuaGFzQ2xhc3MoXCJpcy1ub3QtdG9nZ2xlZFwiKSkge1xuICAgICAgICAkdG9nZ2xlUGFyZW50LmZpbmQoXCIuYy10b2dnbGVfX2ljb25cIikuY3NzKFwiZmlsbFwiLCBcIiM5RkE5QjhcIik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAkKFwiLm8tYnRuLXByZXZcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBjbG9zZXN0WEdyaWQgPSAkKHRoaXMpLnBhcmVudCgpLm5leHQoXCIuaG9yaXpvbnRhbC1zY3JvbGxcIik7XG4gICAgdmFyIGdyaWRJdGVtV2lkdGggPSAkKHRoaXMpLnBhcmVudCgpLm5leHQoXCIuaG9yaXpvbnRhbC1zY3JvbGxcIikuY2hpbGRyZW4oXCIubC1jYXJkLWdyaWRfX2l0ZW1cIikub3V0ZXJXaWR0aCh0cnVlKTtcbiAgICB2YXIgbGVmdFBvcyA9IGNsb3Nlc3RYR3JpZC5zY3JvbGxMZWZ0KCk7XG4gICAgY2xvc2VzdFhHcmlkLmFuaW1hdGUoe1xuICAgICAgc2Nyb2xsTGVmdDogbGVmdFBvcyAtIGdyaWRJdGVtV2lkdGhcbiAgICB9LCAxMDApO1xuICB9KTtcbiAgXG4gICQoXCIuby1idG4tbmV4dFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNsb3Nlc3RYR3JpZCA9ICQodGhpcykucGFyZW50KCkubmV4dChcIi5ob3Jpem9udGFsLXNjcm9sbFwiKTtcbiAgICB2YXIgZ3JpZEl0ZW1XaWR0aCA9ICQodGhpcykucGFyZW50KCkubmV4dChcIi5ob3Jpem9udGFsLXNjcm9sbFwiKS5jaGlsZHJlbihcIi5sLWNhcmQtZ3JpZF9faXRlbVwiKS5vdXRlcldpZHRoKHRydWUpO1xuICAgIHZhciBsZWZ0UG9zID0gY2xvc2VzdFhHcmlkLnNjcm9sbExlZnQoKTtcbiAgICBjbG9zZXN0WEdyaWQuYW5pbWF0ZSh7XG4gICAgICBzY3JvbGxMZWZ0OiBsZWZ0UG9zICsgZ3JpZEl0ZW1XaWR0aFxuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gICQoXCIubC1zZWN0aW9uLW1vZHVsZS0tMmNvbF9fYnRuLXByZXZcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBjbG9zZXN0WEdyaWQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLm5leHQoXCIubC1zZWN0aW9uLW1vZHVsZS0tMmNvbF9fY29udGVudFwiKS5jaGlsZHJlbihcIi5ob3Jpem9udGFsLXNjcm9sbFwiKTtcbiAgICB2YXIgZ3JpZEl0ZW1XaWR0aCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkubmV4dChcIi5sLXNlY3Rpb24tbW9kdWxlLS0yY29sX19jb250ZW50XCIpLmNoaWxkcmVuKFwiLmhvcml6b250YWwtc2Nyb2xsXCIpLmNoaWxkcmVuKFwiLmwtc2VjdGlvbi1tb2R1bGUtLTJjb2xfX2dyaWQtaXRlbVwiKS5vdXRlcldpZHRoKHRydWUpO1xuICAgIHZhciBsZWZ0UG9zID0gY2xvc2VzdFhHcmlkLnNjcm9sbExlZnQoKTtcbiAgICBjbG9zZXN0WEdyaWQuYW5pbWF0ZSh7XG4gICAgICBzY3JvbGxMZWZ0OiBsZWZ0UG9zIC0gZ3JpZEl0ZW1XaWR0aFxuICAgIH0sIDEwMCk7XG4gIH0pO1xuICBcbiAgJChcIi5sLXNlY3Rpb24tbW9kdWxlLS0yY29sX19idG4tbmV4dFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNsb3Nlc3RYR3JpZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkubmV4dChcIi5sLXNlY3Rpb24tbW9kdWxlLS0yY29sX19jb250ZW50XCIpLmNoaWxkcmVuKFwiLmhvcml6b250YWwtc2Nyb2xsXCIpO1xuICAgIHZhciBncmlkSXRlbVdpZHRoID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5uZXh0KFwiLmwtc2VjdGlvbi1tb2R1bGUtLTJjb2xfX2NvbnRlbnRcIikuY2hpbGRyZW4oXCIuaG9yaXpvbnRhbC1zY3JvbGxcIikuY2hpbGRyZW4oXCIubC1zZWN0aW9uLW1vZHVsZS0tMmNvbF9fZ3JpZC1pdGVtXCIpLm91dGVyV2lkdGgodHJ1ZSk7XG4gICAgdmFyIGxlZnRQb3MgPSBjbG9zZXN0WEdyaWQuc2Nyb2xsTGVmdCgpO1xuICAgIGNsb3Nlc3RYR3JpZC5hbmltYXRlKHtcbiAgICAgIHNjcm9sbExlZnQ6IGxlZnRQb3MgKyBncmlkSXRlbVdpZHRoXG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cblxuICAvLyAkKFwiLmwtc2VjdGlvbi1tb2R1bGUtLTJjb2xfX2J0bi1wcmV2XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgLy8gICB2YXIgY2xvc2VzdFhHcmlkMiA9ICQoXCIubC1zZWN0aW9uLW1vZHVsZS0tMmNvbF9faG9yaXpvbnRhbC1zY3JvbGxcIik7XG4gIC8vICAgdmFyIGdyaWRJdGVtV2lkdGgyID0gJChcIi5sLXNlY3Rpb24tbW9kdWxlLS0yY29sX19ob3Jpem9udGFsLXNjcm9sbFwiKS5jaGlsZHJlbihcIi5sLXNlY3Rpb24tbW9kdWxlLS0yY29sX19ncmlkLWl0ZW1cIikub3V0ZXJXaWR0aCh0cnVlKTtcbiAgLy8gICB2YXIgbGVmdFBvczIgPSBjbG9zZXN0WEdyaWQyLnNjcm9sbExlZnQoKTtcbiAgLy8gICBjbG9zZXN0WEdyaWQyLmFuaW1hdGUoe1xuICAvLyAgICAgc2Nyb2xsTGVmdDogbGVmdFBvczIgLSBncmlkSXRlbVdpZHRoMlxuICAvLyAgIH0sIDEwMCk7XG4gIC8vIH0pO1xuXG4gIC8vICQoXCIubC1zZWN0aW9uLW1vZHVsZS0tMmNvbF9fYnRuLW5leHRcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAvLyAgIHZhciBjbG9zZXN0WEdyaWQyID0gJChcIi5sLXNlY3Rpb24tbW9kdWxlLS0yY29sX19ob3Jpem9udGFsLXNjcm9sbFwiKTtcbiAgLy8gICB2YXIgZ3JpZEl0ZW1XaWR0aDIgPSAkKFwiLmwtc2VjdGlvbi1tb2R1bGUtLTJjb2xfX2hvcml6b250YWwtc2Nyb2xsXCIpLmNoaWxkcmVuKFwiLmwtc2VjdGlvbi1tb2R1bGUtLTJjb2xfX2dyaWQtaXRlbVwiKS5vdXRlcldpZHRoKHRydWUpO1xuICAvLyAgIHZhciBsZWZ0UG9zMiA9IGNsb3Nlc3RYR3JpZDIuc2Nyb2xsTGVmdCgpO1xuICAvLyAgIGNsb3Nlc3RYR3JpZDIuYW5pbWF0ZSh7XG4gIC8vICAgICBzY3JvbGxMZWZ0OiBsZWZ0UG9zMiArIGdyaWRJdGVtV2lkdGgyXG4gIC8vICAgfSwgMTAwKTtcbiAgLy8gfSk7XG5cbiAgdmFyIG1xSGFuZHN3aWRlID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA0My4xODc1cmVtKVwiKTtcblxuICAvLyBUZXJtcyBQb3AgVXBcbiAgJCgnI3Rlcm1zLWFuZC1jb25kaXRpb24nKS5wb3B1cCh7XG4gICAgZXNjYXBlOiBmYWxzZSxcbiAgICBhYnNvbHV0ZTogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kOiB0cnVlLFxuICAgIHRyYW5zaXRpb246ICdhbGwgMC4zcycsXG4gICAgcGFnZWNvbnRhaW5lcjogJy5wLW1haW4tY29udGVudCcsIFxuICAgIHNjcm9sbGxvY2s6IHRydWUsXG4gICAgY29sb3I6ICdyZ2JhKDEyLCAzNSwgNjQsIDAuNzUpJ1xuICB9KTtcblxuICByZW1vdmVUZXJtc1BvcHVwKCk7XG4gIFxuICBtcUhhbmRzd2lkZS5hZGRMaXN0ZW5lcihyZW1vdmVUZXJtc1BvcHVwKVxuXG5cbiAgZnVuY3Rpb24gcmVtb3ZlVGVybXNQb3B1cCgpe1xuICAgIGlmIChtcUhhbmRzd2lkZS5tYXRjaGVzKSB7XG4gICAgICAkKCcjdGVybXMtYW5kLWNvbmRpdGlvbicpLnBvcHVwKCdoaWRlJyk7XG4gICAgICAkKCcuYy10ZXJtcy0td2lkZScpLmh0bWwoJCgnLmMtdGVybXMnKS5odG1sKCkpO1xuICAgIH0gZWxzZSAge1xuICAgICAgJCgnLmMtdGVybXMtLXdpZGUnKS5lbXB0eSgpO1xuICAgIH0gXG4gIH1cblxuICBcbiAgXG59KTsiXX0=
